(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[104],{5209:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/workout/[id]",function(){return t(1877)}])},1877:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return WorkoutDetail}});var s=t(5893),a=t(7294),i=t(1163);function WorkoutDetail(){let e=(0,i.useRouter)(),{id:n}=e.query,[t,r]=(0,a.useState)(null),[o,l]=(0,a.useState)([]),[c,d]=(0,a.useState)({});(0,a.useEffect)(()=>{n&&(fetch("/api/workouts/".concat(n)).then(e=>e.json()).then(e=>r(e)),fetch("/api/trackings?workoutId=".concat(n)).then(e=>e.json()).then(e=>l(e)))},[n]);let getLastSession=e=>{let n=o.sort((e,n)=>new Date(n.date)-new Date(e.date));return n.find(n=>n.exercises.some(n=>n.name===e))},getHeavyDay=e=>{let n=o.filter(n=>n.exercises.some(n=>n.name===e&&n.isHeavy)),t=n.sort((e,n)=>new Date(n.date)-new Date(e.date));return t[0]},handleTrackingChange=(e,n,t)=>{d({...c,[e]:{...c[e],[n]:t}})},saveTracking=async()=>{let s=t.exercises.map(e=>{var n,t,s,a;return{name:e.name,weight:(null===(n=c[e.name])||void 0===n?void 0:n.weight)||0,sets:(null===(t=c[e.name])||void 0===t?void 0:t.sets)||e.sets,reps:(null===(s=c[e.name])||void 0===s?void 0:s.reps)||e.reps,isHeavy:(null===(a=c[e.name])||void 0===a?void 0:a.isHeavy)||!1}});await fetch("/api/trackings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({workoutId:n,date:new Date().toISOString(),exercises:s})}),e.reload()};return t?(0,s.jsxs)("div",{className:"container",children:[(0,s.jsx)("h1",{children:t.name}),t.exercises.map((e,n)=>{var t,a,i,r,o,l;let c=getLastSession(e.name),d=getHeavyDay(e.name);return(0,s.jsxs)("div",{className:"exercise-card",children:[(0,s.jsx)("h3",{children:e.name}),(0,s.jsx)("p",{style:{color:"#64748b",margin:"4px 0"},children:e.description}),(0,s.jsxs)("p",{style:{fontSize:"14px",color:"#475569"},children:["Planned: ",e.sets," sets x ",e.reps," reps, Rest: ",e.restTime,"s"]}),(e.rpe||e.tempo)&&(0,s.jsxs)("p",{style:{fontSize:"14px",color:"#475569"},children:[e.rpe&&"RPE: ".concat(e.rpe,"/10")," ",e.rpe&&e.tempo&&" | "," ",e.tempo&&"Tempo: ".concat(e.tempo)]}),c&&(0,s.jsxs)("p",{style:{fontSize:"14px",color:"#059669"},children:["Last: Weight ",null===(t=c.exercises.find(n=>n.name===e.name))||void 0===t?void 0:t.weight,", Sets ",null===(a=c.exercises.find(n=>n.name===e.name))||void 0===a?void 0:a.sets,", Reps ",null===(i=c.exercises.find(n=>n.name===e.name))||void 0===i?void 0:i.reps]}),d&&(0,s.jsxs)("p",{style:{fontSize:"14px",color:"#dc2626"},children:["Heavy: Weight ",null===(r=d.exercises.find(n=>n.name===e.name))||void 0===r?void 0:r.weight,", Sets ",null===(o=d.exercises.find(n=>n.name===e.name))||void 0===o?void 0:o.sets,", Reps ",null===(l=d.exercises.find(n=>n.name===e.name))||void 0===l?void 0:l.reps]}),(0,s.jsxs)("div",{style:{display:"flex",gap:"8px",marginTop:"12px"},children:[(0,s.jsx)("input",{type:"number",placeholder:"Weight",onChange:n=>handleTrackingChange(e.name,"weight",n.target.value),style:{flex:1}}),(0,s.jsx)("input",{type:"number",placeholder:"Sets",defaultValue:e.sets,onChange:n=>handleTrackingChange(e.name,"sets",n.target.value),style:{flex:1}}),(0,s.jsx)("input",{type:"number",placeholder:"Reps",defaultValue:e.reps,onChange:n=>handleTrackingChange(e.name,"reps",n.target.value),style:{flex:1}})]}),(0,s.jsxs)("label",{className:"checkbox-label",children:[(0,s.jsx)("input",{type:"checkbox",onChange:n=>handleTrackingChange(e.name,"isHeavy",n.target.checked)}),"Mark as Heavy"]})]},n)}),(0,s.jsx)("button",{onClick:saveTracking,style:{width:"100%",marginTop:"20px"},children:"Save Tracking"})]}):(0,s.jsx)("div",{className:"container",children:"Loading..."})}},1163:function(e,n,t){e.exports=t(9974)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=5209)}),_N_E=e.O()}]);